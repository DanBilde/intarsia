<!DOCTYPE html>
<html ng-app="myApp">

<head>
  <% include partials/template/head.ejs %>
</head>

<body>
    <% include partials/template/header.ejs %>
    <section class="layout" ng-controller="AppCtrl">
      <div class="primary">
          <% if (!isAuthenticated) { %>
      <a href="/login">Log in </a>
      <% } else { %>
      Hello, <%= user.name %>
      <a href="/logout"> Log out here </a>
      <% } %>
        <table class="table">
          <thead>
            <tr>
              <th> Name </th>
              <th> Description </th>
              <th> Image </th>
              <th> Actions </th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>
                <input class="form-control" ng-model="product.name">
              </td>
              <td>
                <input class="form-control" ng-model="product.description">
              </td>
              <td>
                <input class="form-control" ng-model="product.image">
              </td>
              <td ng-if="!isEditMode">
                <button class="btn btn-success" ng-click="addProduct()">Add Product</button>
              </td>
              <td ng-if="isEditMode">
                <button class="btn btn-info" ng-click="updateProduct()">Update</button>
              </td>
              <td ng-if="isEditMode">
                <button class="btn btn-danger" ng-click="cancelEdit()">Cancel</button>
              </td>
            </tr>
            <tr ng-repeat="product in products track by product._id">
              <td>{{product.name}}</td>
              <td>{{product.description}}</td>
              <td>{{product.image}}</td>
              <td>
                <button class="btn btn-warning" ng-click="editProduct(product._id)">Edit</button>
              </td>
              <td>
                <button class="btn btn-danger" ng-click="removeProduct(product._id)">Remove</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <!--primary -->
      <aside class="secondary">
      </aside>
      <!-- secondary-->
    </section>
    <% include partials/template/footer.ejs %>
      <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.min.js"></script>
      <script src="controllers/controller.js"></script>
}
</body>

</html>
